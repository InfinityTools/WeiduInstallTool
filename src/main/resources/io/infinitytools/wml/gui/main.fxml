<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckMenuItem?>
<?import javafx.scene.control.CustomMenuItem?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.SeparatorMenuItem?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>

<GridPane xmlns="http://javafx.com/javafx"
          xmlns:fx="http://javafx.com/fxml"
          fx:controller="io.infinitytools.wml.gui.MainWindowController"
          stylesheets="@mainStyles.css"
          alignment="center"
          hgap="8"
          vgap="8">
  <padding>
    <Insets top="10"
            right="10"
            bottom="10"
            left="10"/>
  </padding>
  <columnConstraints>
    <ColumnConstraints hgrow="ALWAYS"/>
    <ColumnConstraints halignment="CENTER"/>
  </columnConstraints>

  <!-- Grid(0, 0): Output label -->
  <HBox alignment="BOTTOM_LEFT"
        spacing="8"
        GridPane.columnIndex="0"
        GridPane.rowIndex="0"
        GridPane.halignment="LEFT">
    <Label text="Output:"
           styleClass="boldLabel"/>
    <Pane HBox.hgrow="ALWAYS"/>
    <Button fx:id="aboutButton"
            text=" ? ">
      <tooltip>
        <Tooltip text="About Weidu Mod Launcher..."/>
      </tooltip>
    </Button>
    <MenuButton fx:id="optionsButton"
                text="Options"
                HBox.hgrow="ALWAYS">
      <graphic>
        <ImageView fitWidth="16"
                   fitHeight="16"
                   preserveRatio="true">
          <Image url="@../icons/options/32x32.png"/>
        </ImageView>
      </graphic>
      <tooltip>
        <Tooltip text="Click to pop up a menu with available options."/>
      </tooltip>
      <items>
        <CheckMenuItem fx:id="autoQuitCheckItem"
                       text="Quit on Enter">
          <!--<tooltip>
            <Tooltip fx:id="autoQuitTooltip"
                     text="Select to quit the launcher when pressing Enter after the WeiDU process has terminated.">
            </Tooltip>
          </tooltip>-->
        </CheckMenuItem>
        <CheckMenuItem fx:id="visualizeResultCheckItem"
                       text="Visualize Result of WeiDU Operation">
          <!--<tooltip>
            <Tooltip fx:id="visualizeResultTooltip"
                     text="Select to provide a visual hint about the success state of the WeiDU operation.">
            </Tooltip>
          </tooltip>-->
        </CheckMenuItem>
        <CheckMenuItem fx:id="warnModOrderCheckItem"
                       text="Warn about Mod Order Conflicts">
          <!--<tooltip>
            <Tooltip fx:id="warnModOrderTooltip"
                     text="Select to warn if the installation conflicts with the mod order provided by the associated ini file (if available).">
            </Tooltip>
          </tooltip>-->
        </CheckMenuItem>
        <CheckMenuItem fx:id="darkModeUiCheckItem"
                       text="Dark Mode UI">
          <!--<tooltip>
            <Tooltip fx:id="darkModeUiTooltip"
                     text="Enable to apply a dark theme to the UI.">
            </Tooltip>
          </tooltip>-->
        </CheckMenuItem>

        <SeparatorMenuItem />

        <CustomMenuItem fx:id="outputFontSizeMenuItem">
          <content>
            <HBox alignment="CENTER_LEFT"
                  spacing="8">
              <padding>
                <Insets top="2"
                        right="4"
                        bottom="2"/>
              </padding>
              <Label text="Output Font Size:"
                     styleClass="boldLabel"/>
              <Spinner fx:id="outputFontSizeSpinner"
                       HBox.hgrow="SOMETIMES">
                <valueFactory>
                  <!-- Fully qualified class path required to work around fxml build errors -->
                  <javafx.scene.control.SpinnerValueFactory.DoubleSpinnerValueFactory fx:id="outputFontSizeValueFactory"
                                                                                      min="4.0"
                                                                                      max="80.0"
                                                                                      initialValue="12.0"
                                                                                      amountToStepBy="0.5">
                  </javafx.scene.control.SpinnerValueFactory.DoubleSpinnerValueFactory>
                </valueFactory>
              </Spinner>
              <Label text="pt"
                     styleClass="boldLabel"/>
            </HBox>
          </content>
        </CustomMenuItem>

        <SeparatorMenuItem />

        <!-- Output Buffer Size uses a custom menu item with a complex UI layout -->
        <CustomMenuItem fx:id="bufferSizeMenuItem">
          <content>
            <VBox spacing="4">
              <Label styleClass="boldLabel"
                     text="Output Buffer Size:"/>
              <HBox alignment="CENTER_LEFT"
                    spacing="8">
                <Slider fx:id="bufferSizeSlider"
                        max="5000000"
                        blockIncrement="500000"
                        majorTickUnit="500000"
                        minorTickCount="5"
                        showTickMarks="true"
                        snapToTicks="true"
                        HBox.hgrow="ALWAYS">
                </Slider>
                <Label fx:id="bufferSizeValueLabel"
                       text="0"/>
              </HBox>
            </VBox>
          </content>
        </CustomMenuItem>
      </items>
    </MenuButton>
  </HBox>

  <!-- Grid(0, 1): Output text area -->
  <ScrollPane fx:id="outputScrollPane"
              fitToWidth="true"
              fitToHeight="true"
              GridPane.columnIndex="0"
              GridPane.rowIndex="1"
              GridPane.hgrow="ALWAYS"
              GridPane.vgrow="ALWAYS">
    <TextArea fx:id="outputArea"
              prefColumnCount="80"
              wrapText="true"
              editable="false"/>
  </ScrollPane>

  <!-- Grid(0, 2): User input (label, input field, button) -->
  <HBox alignment="CENTER_LEFT"
        spacing="8"
        GridPane.columnIndex="0"
        GridPane.rowIndex="2"
        GridPane.halignment="LEFT">
    <Label text="User Input:"
           styleClass="boldLabel"/>
    <TextField fx:id="inputField"
               HBox.hgrow="ALWAYS"/>
    <Button fx:id="sendButton"
            text="Send">
      <tooltip>
        <Tooltip text="Sends the user input to the WeiDU process. Quits the launcher when WeiDU has terminated if option &quot;Quit on Enter&quot; is enabled. (Shortcut: Enter)"
                 showDuration="10s"
                 maxWidth="400"
                 wrapText="true">
        </Tooltip>
      </tooltip>
    </Button>
  </HBox>

  <!-- Grid(1, 0): empty placeholder -->
  <Pane GridPane.columnIndex="1"
        GridPane.rowIndex="0"/>

  <!-- Grid(1, 1): Toolbar -->
  <VBox alignment="TOP_CENTER"
        spacing="8"
        GridPane.columnIndex="1"
        GridPane.rowIndex="1"
        GridPane.halignment="CENTER">
    <ToggleButton fx:id="detailsButton"
                  text="Show Details"
                  maxWidth="Infinity">
      <tooltip>
        <Tooltip text="Select to show available components and additional information about the mod."/>
      </tooltip>
    </ToggleButton>
    <Pane VBox.vgrow="ALWAYS"/>
    <Label text="Quick Input"
           alignment="CENTER"
           styleClass="boldLabel"/>
    <Button fx:id="inputQuitButton"
            text="[_Q]uit"
            maxWidth="Infinity">
      <tooltip>
        <Tooltip text="Sends the letter &quot;Q&quot; to the WeiDU process."/>
      </tooltip>
    </Button>
    <Button fx:id="inputAskButton"
            text="[_A]sk"
            maxWidth="Infinity">
      <tooltip>
        <Tooltip text="Sends the letter &quot;A&quot; to the WeiDU process."/>
      </tooltip>
    </Button>
    <Button fx:id="inputSkipButton"
            text="[_S]kip"
            maxWidth="Infinity">
      <tooltip>
        <Tooltip text="Sends the letter &quot;S&quot; to the WeiDU process."/>
      </tooltip>
    </Button>
    <Button fx:id="inputReinstallButton"
            text="[_R]e-install"
            maxWidth="Infinity">
      <tooltip>
        <Tooltip text="Sends the letter &quot;R&quot; to the WeiDU process."/>
      </tooltip>
    </Button>
    <Button fx:id="inputUninstallButton"
            text="[_U]ninstall"
            maxWidth="Infinity">
      <tooltip>
        <Tooltip text="Sends the letter &quot;U&quot; to the WeiDU process."/>
      </tooltip>
    </Button>
    <Button fx:id="inputInstallButton"
            text="[_I]nstall"
            maxWidth="Infinity">
      <tooltip>
        <Tooltip text="Sends the letter &quot;I&quot; to the WeiDU process."/>
      </tooltip>
    </Button>
    <Button fx:id="inputNoButton"
            text="[_N]o"
            maxWidth="Infinity">
      <tooltip>
        <Tooltip text="Sends the letter &quot;N&quot; to the WeiDU process."/>
      </tooltip>
    </Button>
    <Button fx:id="inputYesButton"
            text="[_Y]es"
            maxWidth="Infinity">
      <tooltip>
        <Tooltip text="Sends the letter &quot;Y&quot; to the WeiDU process."/>
      </tooltip>
    </Button>
  </VBox>

  <!-- Grid(1, 2): Quit/Terminate button -->
  <Pane GridPane.columnIndex="1"
        GridPane.rowIndex="2"/>

  <!-- Grid(0-1, 3): Quit/Terminate button -->
  <HBox alignment="CENTER"
        GridPane.columnIndex="0"
        GridPane.rowIndex="3"
        GridPane.columnSpan="2">
    <Button fx:id="quitButton"
            text="Quit"
            maxHeight="Infinity">
    </Button>
  </HBox>
</GridPane>
